---
title: "CS 5200: Build XML Structure"
output: html_notebook
author: "Dylan Wu"
---


```{r}

xmlInstalled <- require(XML)
if (!xmlInstalled) {
  install.packages('XML')
}

xmlFile <- "page_log.xml"

dom <- xmlParse(xmlFile, validate = T)
print("XML document is valid")

root <- xmlRoot(dom <- xmlRoot(dom))


getPage <- function (pageId)  
{
  # get the page that has the value of pageId for its pid attribute (key)
  selectedPage <- xpathSApply(root, paste0("page[./@pid=", "'", pageId, "'", "]"))[[1]]
  return (selectedPage)
}

pageId <- 'p103' # choose arbitrary page id
selectedPage <- getPage(pageId)

print(paste("Page ID: ", pageId))

print("Selected page: ")
print(selectedPage)


print("Visits of selected page: ")
visits <- xmlChildren(selectedPage)
print(visits)
print(paste0("Number of visits for page ", pageId, ": ", xmlSize(visits)))


# xmlSize()
```